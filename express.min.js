var Express=function(){};(function(){var e=this;var t=0;var n=[];var r=[];this.version="Alpha "+1;this.config={};var i=function(){t++};var s=function(i){t--;if(i){if(!n)n=[];n.push(i);if(e.error_callback)e.error_callback(i)}if(t==0){if(r.length>0)o();r.splice(0,1);if(e.callback&&r.length<1&&t<1){if(!n||n.length<1)n=null;e.callback(n);e.callback=null}}};var o=function(){if(r.length<1)return;var t=r[0];e.ajax(t.url,t.method,t.data,t.callback)};this.done=function(t){if(typeof t!=="function")return console.warn("Express.done() only accepts functions");e.callback=t;return this};this.error=function(t){if(typeof t!=="function")return console.warn("Express.errors() only accepts functions");e.error_callback=t;return this};this.ajax=function(n,o,u,a){var f=function(){if(e.config.sync&&t>0){r.unshift({url:n,method:o,data:u,callback:a});return}e.ajax(n,o,u,a)};if(e.config.sync&&t>0){var l={url:n,method:o,data:u,callback:a};r.push(l);return this}if(typeof o=="function"){a=o;u=o=undefined}if(typeof u=="function"){a=u;u=undefined}i();$.ajax({url:n,cache:e.config.cache||false,type:o||e.config.default_method||"GET",data:u||{},dataType:e.config.default_dataType||"json"}).done(function(e){if(a)a(null,e,f);s()}).error(function(e,t,n){console.log("Fails");if(a)a(e);s(e)});return this};this.get=function(e,t,n){if(!t){n=t;t=undefined}this.ajax(e,"GET",t,n);return this};this.post=function(e,t,n){if(!t){n=t;t=undefined}this.ajax(e,"POST",t,n);return this}}).call(Express)
